{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Mario%20GGS/fp-ecommerce/src/app/index/carrito.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  createContext,\n  ReactNode,\n  useContext,\n  useEffect,\n  useState,\n} from \"react\";\n\nexport interface CartItem {\n  id: number;\n  nombre: string;\n  precio: number;\n  establecimiento: string;\n  cantidad: number;\n}\n\ninterface CartContextType {\n  items: CartItem[];\n  addItem: (item: Omit<CartItem, \"cantidad\">, cantidad: number) => void;\n  removeItem: (id: number, establecimiento: string) => void;\n  updateQuantity: (\n    id: number,\n    cantidad: number,\n    establecimiento: string\n  ) => void;\n  clearCart: () => void;\n  isOpen: boolean;\n  openCart: () => void;\n  closeCart: () => void;\n  toggleCart: () => void;\n  totalItems: number;\n  totalPrice: number;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\nexport const CartProvider = ({ children }: { children: ReactNode }) => {\n  const [items, setItems] = useState<CartItem[]>([]);\n  const [isOpen, setIsOpen] = useState(false);\n  const [totalItems, setTotalItems] = useState(0);\n  const [totalPrice, setTotalPrice] = useState(0);\n\n  // Cargar carrito desde localStorage en el primer renderizado\n  useEffect(() => {\n    const savedCart = localStorage.getItem(\"cart\");\n    if (savedCart) {\n      try {\n        const parsedCart = JSON.parse(savedCart);\n        setItems(parsedCart);\n      } catch (error) {\n        console.error(\"Error al cargar el carrito guardado:\", error);\n      }\n    }\n  }, []);\n\n  // Actualizar localStorage cuando el carrito cambia\n  useEffect(() => {\n    localStorage.setItem(\"cart\", JSON.stringify(items));\n\n    // Calcular totales\n    const itemCount = items.reduce((total, item) => total + item.cantidad, 0);\n    const price = items.reduce(\n      (total, item) => total + item.precio * item.cantidad,\n      0\n    );\n\n    setTotalItems(itemCount);\n    setTotalPrice(price);\n  }, [items]);\n\n  const addItem = (item: Omit<CartItem, \"cantidad\">, cantidad: number) => {\n    setItems((prevItems) => {\n      // Verificar si el producto ya está en el carrito\n      const existingItemIndex = prevItems.findIndex(\n        (i) => i.id === item.id && i.establecimiento === item.establecimiento\n      );\n\n      if (existingItemIndex >= 0) {\n        // Si existe, actualizar la cantidad\n        const updatedItems = [...prevItems];\n        updatedItems[existingItemIndex].cantidad += cantidad;\n        return updatedItems;\n      } else {\n        // Si no existe, agregar como nuevo item\n        return [...prevItems, { ...item, cantidad }];\n      }\n    });\n  };\n\n  // Actualizar para usar también el establecimiento\n  const removeItem = (id: number, establecimiento: string) => {\n    setItems((prevItems) =>\n      prevItems.filter(\n        (item) => !(item.id === id && item.establecimiento === establecimiento)\n      )\n    );\n  };\n\n  // Actualizar para usar también el establecimiento\n  const updateQuantity = (\n    id: number,\n    cantidad: number,\n    establecimiento: string\n  ) => {\n    if (cantidad <= 0) {\n      removeItem(id, establecimiento);\n      return;\n    }\n\n    setItems((prevItems) =>\n      prevItems.map((item) =>\n        item.id === id && item.establecimiento === establecimiento\n          ? { ...item, cantidad }\n          : item\n      )\n    );\n  };\n\n  const clearCart = () => {\n    setItems([]);\n  };\n\n  const openCart = () => setIsOpen(true);\n  const closeCart = () => setIsOpen(false);\n  const toggleCart = () => setIsOpen((prev) => !prev);\n\n  return (\n    <CartContext.Provider\n      value={{\n        items,\n        addItem,\n        removeItem,\n        updateQuantity,\n        clearCart,\n        isOpen,\n        openCart,\n        closeCart,\n        toggleCart,\n        totalItems,\n        totalPrice,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nexport const useCart = () => {\n  const context = useContext(CartContext);\n  if (context === undefined) {\n    throw new Error(\"useCart debe usarse dentro de un CartProvider\");\n  }\n  return context;\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Mario%20GGS/fp-ecommerce/src/app/lib/supabaseClient.ts"],"sourcesContent":["// lib/supabaseClient.js\nimport { createClient } from \"@supabase/supabase-js\";\n\nconst supabaseUrl = \"https://ggpzelridqabafjlczaj.supabase.co\"; // Reemplaza con tu URL de Supabase\nconst supabaseAnonKey =\n  \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdncHplbHJpZHFhYmFmamxjemFqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE3MDk5NDIsImV4cCI6MjA1NzI4NTk0Mn0.DuqbIhlJnbz7RXge_KbhBmQqM6jgrdglM9DWOz0CIJ4\"; // Reemplaza con tu clave anónima\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;AACxB;;AAEA,MAAM,cAAc,4CAA4C,mCAAmC;AACnG,MAAM,kBACJ,oNAAoN,iCAAiC;AAEhP,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAa","debugId":null}},
    {"offset": {"line": 212, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Mario%20GGS/fp-ecommerce/src/app/components/vistacarro.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useCart } from \"../index/carrito\";\nimport { supabase } from \"../lib/supabaseClient\";\n\n// Función auxiliar para formatear precios con seguridad\nconst formatPrice = (price: number | undefined | null): string => {\n  if (typeof price !== \"number\" || isNaN(price)) {\n    return \"0.00\";\n  }\n  return price.toFixed(2);\n};\n\ninterface PrecioAlternativo {\n  id_establecimiento: number;\n  establecimiento: string;\n  direccion?: string;\n  municipio?: string;\n  total: number;\n  ahorro: number;\n  productos: {\n    id: number;\n    nombre: string;\n    precio: number;\n    disponible: boolean;\n    cantidad?: number;\n  }[];\n}\n\nconst Cart = () => {\n  const {\n    items,\n    removeItem,\n    updateQuantity,\n    clearCart,\n    isOpen,\n    closeCart,\n    totalItems,\n    totalPrice,\n    addItem,\n  } = useCart();\n  const cartRef = useRef<HTMLDivElement>(null);\n  const [preciosAlternativos, setPreciosAlternativos] = useState<\n    PrecioAlternativo[]\n  >([]);\n  const [cargandoComparacion, setCargandoComparacion] = useState(false);\n  const [errorComparacion, setErrorComparacion] = useState<string | null>(null);\n  const [mostrarComparacion, setMostrarComparacion] = useState(false);\n  const [aplicandoCambios, setAplicandoCambios] = useState(false);\n\n  // Cerrar carrito al hacer clic fuera\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (cartRef.current && !cartRef.current.contains(event.target as Node)) {\n        closeCart();\n      }\n    }\n\n    if (isOpen) {\n      document.addEventListener(\"mousedown\", handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [isOpen, closeCart]);\n\n  // Calcular precios alternativos cuando cambian los items del carrito\n  useEffect(() => {\n    if (items.length > 0 && mostrarComparacion) {\n      compararPrecios();\n    } else {\n      setPreciosAlternativos([]);\n    }\n  }, [items, mostrarComparacion]);\n\n  // Función para aplicar cambios al carrito basados en una alternativa seleccionada\n  const aplicarCambiosAlCarrito = async (alternativa: PrecioAlternativo) => {\n    try {\n      setAplicandoCambios(true);\n\n      // 1. Vaciar el carrito actual\n      clearCart();\n\n      // 2. Para cada producto en la alternativa, necesitamos obtener la información completa\n      for (const producto of alternativa.productos) {\n        // Obtener información detallada del producto\n        const { data: productoData } = await supabase\n          .from(\"productos\")\n          .select(\"*\")\n          .eq(\"id_producto\", producto.id)\n          .single();\n\n        if (productoData) {\n          // Obtener información detallada del establecimiento\n          const { data: establecimientoData } = await supabase\n            .from(\"establecimientos\")\n            .select(\"*\")\n            .eq(\"id_establecimiento\", alternativa.id_establecimiento)\n            .single();\n\n          // Añadir el producto al carrito\n          if (establecimientoData) {\n            addItem({\n              id: producto.id,\n              nombre: productoData.nombre_producto,\n              precio: producto.precio,\n              cantidad: producto.cantidad || 1, // Usar la cantidad original o 1 por defecto\n              establecimiento: alternativa.establecimiento,\n              direccion_establecimiento: alternativa.direccion || \"\",\n              municipio_establecimiento: alternativa.municipio || \"\",\n              id_establecimiento: alternativa.id_establecimiento,\n            });\n          }\n        }\n      }\n\n      // 3. Mostrar mensaje de éxito (opcional)\n      alert(\"¡Carrito actualizado con la alternativa seleccionada!\");\n\n      // 4. Cerrar la sección de comparación\n      setMostrarComparacion(false);\n    } catch (error) {\n      console.error(\"Error al aplicar cambios al carrito:\", error);\n      alert(\"Ha ocurrido un error al actualizar el carrito\");\n    } finally {\n      setAplicandoCambios(false);\n    }\n  };\n\n  // Función para comparar precios en diferentes establecimientos\n  const compararPrecios = async () => {\n    if (items.length === 0) return;\n\n    setCargandoComparacion(true);\n    setErrorComparacion(null);\n\n    try {\n      // 1. Obtener los IDs de productos en el carrito y sus cantidades\n      const productosEnCarrito = items.map((item) => ({\n        id: item.id,\n        cantidad: item.cantidad,\n      }));\n\n      // 2. Obtener todos los establecimientos disponibles con sus direcciones\n      const { data: establecimientos, error: errorEstablecimientos } =\n        await supabase\n          .from(\"establecimientos\")\n          .select(\n            \"id_establecimiento, nombre_establecimiento, direccion_establecimiento, municipio_establecimiento\"\n          );\n\n      if (errorEstablecimientos)\n        throw new Error(\"Error al obtener establecimientos\");\n\n      // 3. Para cada producto, obtener todos los precios en diferentes establecimientos\n      const preciosPorProducto: Record<\n        number,\n        {\n          establecimiento_id: number;\n          establecimiento: string;\n          direccion?: string;\n          municipio?: string;\n          precio: number;\n        }[]\n      > = {};\n\n      for (const producto of productosEnCarrito) {\n        const { data: precios, error: errorPrecios } = await supabase\n          .from(\"precios\")\n          .select(\n            `\n            precio_producto,\n            id_establecimiento,\n            establecimientos(\n              nombre_establecimiento, \n              direccion_establecimiento,\n              municipio_establecimiento\n            )\n          `\n          )\n          .eq(\"id_producto\", producto.id);\n\n        if (errorPrecios)\n          throw new Error(\n            `Error al obtener precios para el producto ${producto.id}`\n          );\n\n        if (precios) {\n          preciosPorProducto[producto.id] = precios.map((p) => ({\n            establecimiento_id: p.id_establecimiento,\n            establecimiento:\n              p.establecimientos?.nombre_establecimiento || \"Desconocido\",\n            direccion: p.establecimientos?.direccion_establecimiento,\n            municipio: p.establecimientos?.municipio_establecimiento,\n            precio: p.precio_producto,\n          }));\n        }\n      }\n\n      // 4. Calcular el total por establecimiento para los productos en el carrito\n      const totalesPorEstablecimiento: PrecioAlternativo[] = [];\n\n      if (establecimientos) {\n        for (const est of establecimientos) {\n          const productosEnEstablecimiento = productosEnCarrito.map((item) => {\n            // Buscar el precio de este producto en este establecimiento\n            const precioEnEstablecimiento = preciosPorProducto[item.id]?.find(\n              (p) => p.establecimiento_id === est.id_establecimiento\n            );\n\n            // Buscar el nombre del producto original\n            const productoOriginal = items.find((i) => i.id === item.id);\n\n            return {\n              id: item.id,\n              nombre: productoOriginal?.nombre || \"Producto desconocido\",\n              precio: precioEnEstablecimiento?.precio || 0,\n              disponible: !!precioEnEstablecimiento,\n              cantidad: item.cantidad,\n            };\n          });\n\n          // Calcular el total solo si todos los productos están disponibles\n          const todosDisponibles = productosEnEstablecimiento.every(\n            (p) => p.disponible\n          );\n\n          if (todosDisponibles) {\n            const total = productosEnEstablecimiento.reduce(\n              (sum, product) => sum + product.precio * (product.cantidad || 1),\n              0\n            );\n\n            const ahorro = totalPrice - total;\n\n            // Incluir solo si es una tienda diferente o hay ahorro\n            const esEstablecimientoDiferente = !items.every(\n              (item) => item.establecimiento === est.nombre_establecimiento\n            );\n\n            if (esEstablecimientoDiferente || ahorro > 0) {\n              totalesPorEstablecimiento.push({\n                id_establecimiento: est.id_establecimiento,\n                establecimiento: est.nombre_establecimiento,\n                direccion: est.direccion_establecimiento,\n                municipio: est.municipio_establecimiento,\n                total,\n                ahorro,\n                productos: productosEnEstablecimiento.map((p) => ({\n                  id: p.id,\n                  nombre: p.nombre,\n                  precio: p.precio,\n                  disponible: p.disponible,\n                  cantidad: p.cantidad,\n                })),\n              });\n            }\n          }\n        }\n      }\n\n      // 5. Ordenar por menor precio\n      const alternativasOrdenadas = totalesPorEstablecimiento\n        .filter((alt) => alt.ahorro > 0)\n        .sort((a, b) => a.total - b.total);\n\n      setPreciosAlternativos(alternativasOrdenadas);\n    } catch (error) {\n      console.error(\"Error al comparar precios:\", error);\n      setErrorComparacion(\"No se pudieron calcular alternativas de compra.\");\n    } finally {\n      setCargandoComparacion(false);\n    }\n  };\n\n  // Sección de comparación de precios\n  const renderComparacion = () => {\n    if (cargandoComparacion) {\n      return (\n        <div className=\"p-4 border-t border-gray-200 bg-gray-50\">\n          <div className=\"flex justify-center\">\n            <div className=\"animate-spin rounded-full h-6 w-6 border-t-2 border-r-2 border-red-600\"></div>\n            <span className=\"ml-2\">Comparando precios...</span>\n          </div>\n        </div>\n      );\n    }\n\n    if (errorComparacion) {\n      return (\n        <div className=\"p-4 border-t border-gray-200 bg-gray-50\">\n          <p className=\"text-red-600\">{errorComparacion}</p>\n        </div>\n      );\n    }\n\n    if (preciosAlternativos.length === 0 && mostrarComparacion) {\n      return (\n        <div className=\"p-4 border-t border-gray-200 bg-gray-50\">\n          <p className=\"text-gray-600 text-sm\">\n            No se encontraron alternativas más económicas para tu lista de\n            compras.\n          </p>\n        </div>\n      );\n    }\n\n    if (preciosAlternativos.length > 0) {\n      return (\n        <div className=\"p-5 border-t border-gray-200 bg-gray-50\">\n          <h3 className=\"font-bold text-lg mb-4 text-gray-800\">\n            Alternativas más económicas\n          </h3>\n\n          {/* Contenedor con scroll para las alternativas */}\n          <div className=\"max-h-80 overflow-y-auto pr-1\">\n            {preciosAlternativos.map((alternativa, index) => (\n              <div\n                key={index}\n                className=\"mb-4 p-4 bg-white rounded-md shadow-sm border border-gray-200\"\n              >\n                <div className=\"flex justify-between mb-3\">\n                  <div>\n                    <span className=\"font-medium text-lg\">\n                      {alternativa.establecimiento}\n                    </span>\n                    {alternativa.municipio && (\n                      <p className=\"text-sm text-gray-500 mt-1\">\n                        {alternativa.municipio}\n                      </p>\n                    )}\n                    {alternativa.direccion && (\n                      <p className=\"text-xs text-gray-500\">\n                        {alternativa.direccion}\n                      </p>\n                    )}\n                  </div>\n                  <div className=\"text-right\">\n                    <span className=\"text-green-600 font-bold text-lg\">\n                      Ahorras ${formatPrice(alternativa.ahorro)}\n                    </span>\n                  </div>\n                </div>\n                <div className=\"flex justify-between pt-2 border-t border-gray-100\">\n                  <span>Total:</span>\n                  <span className=\"font-bold text-lg\">\n                    ${formatPrice(alternativa.total)}\n                  </span>\n                </div>\n\n                {/* Botón para aplicar cambios */}\n                <div className=\"mt-3 pt-2 border-t border-gray-100\">\n                  <button\n                    onClick={() => aplicarCambiosAlCarrito(alternativa)}\n                    disabled={aplicandoCambios}\n                    className={`w-full py-2 px-4 rounded-md text-center transition-colors ${\n                      aplicandoCambios\n                        ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n                        : \"bg-green-600 hover:bg-green-700 text-white\"\n                    }`}\n                  >\n                    {aplicandoCambios ? (\n                      <span className=\"flex items-center justify-center\">\n                        <svg\n                          className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\"\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                          fill=\"none\"\n                          viewBox=\"0 0 24 24\"\n                        >\n                          <circle\n                            className=\"opacity-25\"\n                            cx=\"12\"\n                            cy=\"12\"\n                            r=\"10\"\n                            stroke=\"currentColor\"\n                            strokeWidth=\"4\"\n                          ></circle>\n                          <path\n                            className=\"opacity-75\"\n                            fill=\"currentColor\"\n                            d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                          ></path>\n                        </svg>\n                        Actualizando...\n                      </span>\n                    ) : (\n                      \"Aplicar esta opción\"\n                    )}\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  // Contenido del carrito\n  return (\n    <div\n      ref={cartRef}\n      className={`fixed z-50 inset-y-0 right-0 w-full md:w-[28rem] lg:w-[32rem] bg-white shadow-lg transform ${\n        isOpen ? \"translate-x-0\" : \"translate-x-full\"\n      } transition-transform duration-300 ease-in-out flex flex-col h-full`}\n    >\n      <div className=\"border-b border-gray-200 p-5 flex justify-between items-center\">\n        <h2 className=\"text-xl font-semibold flex items-center\">\n          <svg\n            className=\"w-6 h-6 text-gray-700 mr-3\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"2\"\n              d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"\n            ></path>\n          </svg>\n          Mi Lista de Compras ({totalItems || 0})\n        </h2>\n        <button\n          onClick={closeCart}\n          className=\"text-gray-500 hover:text-gray-700\"\n        >\n          <svg\n            className=\"w-6 h-6\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"2\"\n              d=\"M6 18L18 6M6 6l12 12\"\n            ></path>\n          </svg>\n        </button>\n      </div>\n\n      {/* Estado del carrito */}\n      {!items || items.length === 0 ? (\n        <div className=\"flex-1 flex flex-col items-center justify-center p-6\">\n          <svg\n            className=\"w-20 h-20 text-gray-300 mb-6\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"2\"\n              d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"\n            />\n          </svg>\n          <p className=\"text-gray-600 text-center mb-6 text-lg\">\n            Tu lista de compras está vacía\n          </p>\n          <button\n            onClick={closeCart}\n            className=\"bg-red-600 text-white px-8 py-3 rounded-md hover:bg-red-700 transition-colors text-lg\"\n          >\n            Seguir comprando\n          </button>\n        </div>\n      ) : (\n        <>\n          <div className=\"flex-1 overflow-y-auto p-5\">\n            {items.map((item, index) => (\n              <div\n                key={`${item.id}-${item.establecimiento}-${index}`}\n                className=\"border-b border-gray-200 py-5 flex\"\n              >\n                <div className=\"w-24 h-24 bg-gray-100 rounded-md flex items-center justify-center mr-4 flex-shrink-0\">\n                  <svg\n                    className=\"w-12 h-12 text-gray-400\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"2\"\n                      d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"\n                    ></path>\n                  </svg>\n                </div>\n                <div className=\"flex-1\">\n                  <h3 className=\"text-gray-800 font-medium text-lg\">\n                    {item.nombre}\n                  </h3>\n\n                  <div className=\"mt-1 mb-3\">\n                    <p className=\"text-sm font-medium text-gray-700\">\n                      {item.establecimiento}\n                    </p>\n                    {item.direccion_establecimiento && (\n                      <p className=\"text-xs text-gray-500\">\n                        {item.direccion_establecimiento}\n                      </p>\n                    )}\n                    {item.municipio_establecimiento && (\n                      <p className=\"text-xs text-gray-500\">\n                        {item.municipio_establecimiento}\n                      </p>\n                    )}\n                  </div>\n\n                  <div className=\"flex items-center mt-3 justify-between\">\n                    <div className=\"flex items-center border border-gray-300 rounded\">\n                      <button\n                        onClick={() =>\n                          updateQuantity(\n                            item.id,\n                            Math.max(1, (item.cantidad || 1) - 1),\n                            item.establecimiento\n                          )\n                        }\n                        className=\"px-3 py-1 border-r border-gray-300\"\n                      >\n                        -\n                      </button>\n                      <span className=\"px-4 py-1 min-w-[40px] text-center\">\n                        {item.cantidad || 1}\n                      </span>\n                      <button\n                        onClick={() =>\n                          updateQuantity(\n                            item.id,\n                            (item.cantidad || 1) + 1,\n                            item.establecimiento\n                          )\n                        }\n                        className=\"px-3 py-1 border-l border-gray-300\"\n                      >\n                        +\n                      </button>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"text-gray-800 font-medium text-lg\">\n                        ${formatPrice(item.precio * (item.cantidad || 1))}\n                      </div>\n                      <div className=\"text-sm text-gray-500\">\n                        ${formatPrice(item.precio)} c/u\n                      </div>\n                    </div>\n                  </div>\n                  <button\n                    onClick={() => removeItem(item.id, item.establecimiento)}\n                    className=\"text-red-600 text-sm mt-3 hover:text-red-800\"\n                  >\n                    Eliminar\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          <div className=\"border-t border-gray-200 p-5 bg-gray-50\">\n            <div className=\"flex justify-between mb-4 text-lg\">\n              <span className=\"text-gray-700\">Subtotal:</span>\n              <span className=\"font-medium\">${formatPrice(totalPrice)}</span>\n            </div>\n\n            {/* Botón para comparar precios */}\n            <div className=\"mb-4\">\n              <button\n                onClick={() => {\n                  setMostrarComparacion(!mostrarComparacion);\n                  if (!mostrarComparacion && preciosAlternativos.length === 0) {\n                    compararPrecios();\n                  }\n                }}\n                className=\"w-full py-3 px-4 bg-gray-100 text-gray-800 border border-gray-300 rounded-md hover:bg-gray-200 transition-colors text-base mb-2\"\n              >\n                {mostrarComparacion\n                  ? \"Ocultar comparación de precios\"\n                  : \"Comparar precios en otras tiendas\"}\n              </button>\n            </div>\n\n            {/* Mostrar comparación de precios */}\n            {mostrarComparacion && renderComparacion()}\n\n            <div className=\"flex flex-col space-y-3 mt-4\">\n              <Link\n                href=\"/checkout\"\n                className=\"bg-red-600 text-white py-3 px-4 rounded-md text-center hover:bg-red-700 transition-colors text-lg\"\n                onClick={closeCart}\n              >\n                Proceder al pago\n              </Link>\n              <button\n                onClick={clearCart}\n                className=\"text-red-600 py-2 hover:text-red-800 text-base\"\n              >\n                Vaciar lista\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Cart;\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,wDAAwD;AACxD,MAAM,cAAc,CAAC;IACnB,IAAI,OAAO,UAAU,YAAY,MAAM,QAAQ;QAC7C,OAAO;IACT;IACA,OAAO,MAAM,OAAO,CAAC;AACvB;AAkBA,MAAM,OAAO;IACX,MAAM,EACJ,KAAK,EACL,UAAU,EACV,cAAc,EACd,SAAS,EACT,MAAM,EACN,SAAS,EACT,UAAU,EACV,UAAU,EACV,OAAO,EACR,GAAG,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IACV,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IACvC,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAE3D,EAAE;IACJ,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IACxE,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEzD,qCAAqC;IACrC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,SAAS,mBAAmB,KAAiB;YAC3C,IAAI,QAAQ,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBACtE;YACF;QACF;QAEA,IAAI,QAAQ;YACV,SAAS,gBAAgB,CAAC,aAAa;QACzC;QACA,OAAO;YACL,SAAS,mBAAmB,CAAC,aAAa;QAC5C;IACF,GAAG;QAAC;QAAQ;KAAU;IAEtB,qEAAqE;IACrE,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,MAAM,MAAM,GAAG,KAAK,oBAAoB;YAC1C;QACF,OAAO;YACL,uBAAuB,EAAE;QAC3B;IACF,GAAG;QAAC;QAAO;KAAmB;IAE9B,kFAAkF;IAClF,MAAM,0BAA0B,OAAO;QACrC,IAAI;YACF,oBAAoB;YAEpB,8BAA8B;YAC9B;YAEA,uFAAuF;YACvF,KAAK,MAAM,YAAY,YAAY,SAAS,CAAE;gBAC5C,6CAA6C;gBAC7C,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,mIAAA,CAAA,WAAQ,CAC1C,IAAI,CAAC,aACL,MAAM,CAAC,KACP,EAAE,CAAC,eAAe,SAAS,EAAE,EAC7B,MAAM;gBAET,IAAI,cAAc;oBAChB,oDAAoD;oBACpD,MAAM,EAAE,MAAM,mBAAmB,EAAE,GAAG,MAAM,mIAAA,CAAA,WAAQ,CACjD,IAAI,CAAC,oBACL,MAAM,CAAC,KACP,EAAE,CAAC,sBAAsB,YAAY,kBAAkB,EACvD,MAAM;oBAET,gCAAgC;oBAChC,IAAI,qBAAqB;wBACvB,QAAQ;4BACN,IAAI,SAAS,EAAE;4BACf,QAAQ,aAAa,eAAe;4BACpC,QAAQ,SAAS,MAAM;4BACvB,UAAU,SAAS,QAAQ,IAAI;4BAC/B,iBAAiB,YAAY,eAAe;4BAC5C,2BAA2B,YAAY,SAAS,IAAI;4BACpD,2BAA2B,YAAY,SAAS,IAAI;4BACpD,oBAAoB,YAAY,kBAAkB;wBACpD;oBACF;gBACF;YACF;YAEA,yCAAyC;YACzC,MAAM;YAEN,sCAAsC;YACtC,sBAAsB;QACxB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wCAAwC;YACtD,MAAM;QACR,SAAU;YACR,oBAAoB;QACtB;IACF;IAEA,+DAA+D;IAC/D,MAAM,kBAAkB;QACtB,IAAI,MAAM,MAAM,KAAK,GAAG;QAExB,uBAAuB;QACvB,oBAAoB;QAEpB,IAAI;YACF,iEAAiE;YACjE,MAAM,qBAAqB,MAAM,GAAG,CAAC,CAAC,OAAS,CAAC;oBAC9C,IAAI,KAAK,EAAE;oBACX,UAAU,KAAK,QAAQ;gBACzB,CAAC;YAED,wEAAwE;YACxE,MAAM,EAAE,MAAM,gBAAgB,EAAE,OAAO,qBAAqB,EAAE,GAC5D,MAAM,mIAAA,CAAA,WAAQ,CACX,IAAI,CAAC,oBACL,MAAM,CACL;YAGN,IAAI,uBACF,MAAM,IAAI,MAAM;YAElB,kFAAkF;YAClF,MAAM,qBASF,CAAC;YAEL,KAAK,MAAM,YAAY,mBAAoB;gBACzC,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,mIAAA,CAAA,WAAQ,CAC1D,IAAI,CAAC,WACL,MAAM,CACL,CAAC;;;;;;;;UAQH,CAAC,EAEA,EAAE,CAAC,eAAe,SAAS,EAAE;gBAEhC,IAAI,cACF,MAAM,IAAI,MACR,CAAC,0CAA0C,EAAE,SAAS,EAAE,EAAE;gBAG9D,IAAI,SAAS;oBACX,kBAAkB,CAAC,SAAS,EAAE,CAAC,GAAG,QAAQ,GAAG,CAAC,CAAC,IAAM,CAAC;4BACpD,oBAAoB,EAAE,kBAAkB;4BACxC,iBACE,EAAE,gBAAgB,EAAE,0BAA0B;4BAChD,WAAW,EAAE,gBAAgB,EAAE;4BAC/B,WAAW,EAAE,gBAAgB,EAAE;4BAC/B,QAAQ,EAAE,eAAe;wBAC3B,CAAC;gBACH;YACF;YAEA,4EAA4E;YAC5E,MAAM,4BAAiD,EAAE;YAEzD,IAAI,kBAAkB;gBACpB,KAAK,MAAM,OAAO,iBAAkB;oBAClC,MAAM,6BAA6B,mBAAmB,GAAG,CAAC,CAAC;wBACzD,4DAA4D;wBAC5D,MAAM,0BAA0B,kBAAkB,CAAC,KAAK,EAAE,CAAC,EAAE,KAC3D,CAAC,IAAM,EAAE,kBAAkB,KAAK,IAAI,kBAAkB;wBAGxD,yCAAyC;wBACzC,MAAM,mBAAmB,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,EAAE;wBAE3D,OAAO;4BACL,IAAI,KAAK,EAAE;4BACX,QAAQ,kBAAkB,UAAU;4BACpC,QAAQ,yBAAyB,UAAU;4BAC3C,YAAY,CAAC,CAAC;4BACd,UAAU,KAAK,QAAQ;wBACzB;oBACF;oBAEA,kEAAkE;oBAClE,MAAM,mBAAmB,2BAA2B,KAAK,CACvD,CAAC,IAAM,EAAE,UAAU;oBAGrB,IAAI,kBAAkB;wBACpB,MAAM,QAAQ,2BAA2B,MAAM,CAC7C,CAAC,KAAK,UAAY,MAAM,QAAQ,MAAM,GAAG,CAAC,QAAQ,QAAQ,IAAI,CAAC,GAC/D;wBAGF,MAAM,SAAS,aAAa;wBAE5B,uDAAuD;wBACvD,MAAM,6BAA6B,CAAC,MAAM,KAAK,CAC7C,CAAC,OAAS,KAAK,eAAe,KAAK,IAAI,sBAAsB;wBAG/D,IAAI,8BAA8B,SAAS,GAAG;4BAC5C,0BAA0B,IAAI,CAAC;gCAC7B,oBAAoB,IAAI,kBAAkB;gCAC1C,iBAAiB,IAAI,sBAAsB;gCAC3C,WAAW,IAAI,yBAAyB;gCACxC,WAAW,IAAI,yBAAyB;gCACxC;gCACA;gCACA,WAAW,2BAA2B,GAAG,CAAC,CAAC,IAAM,CAAC;wCAChD,IAAI,EAAE,EAAE;wCACR,QAAQ,EAAE,MAAM;wCAChB,QAAQ,EAAE,MAAM;wCAChB,YAAY,EAAE,UAAU;wCACxB,UAAU,EAAE,QAAQ;oCACtB,CAAC;4BACH;wBACF;oBACF;gBACF;YACF;YAEA,8BAA8B;YAC9B,MAAM,wBAAwB,0BAC3B,MAAM,CAAC,CAAC,MAAQ,IAAI,MAAM,GAAG,GAC7B,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,KAAK,GAAG,EAAE,KAAK;YAEnC,uBAAuB;QACzB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8BAA8B;YAC5C,oBAAoB;QACtB,SAAU;YACR,uBAAuB;QACzB;IACF;IAEA,oCAAoC;IACpC,MAAM,oBAAoB;QACxB,IAAI,qBAAqB;YACvB,qBACE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;4BAAK,WAAU;sCAAO;;;;;;;;;;;;;;;;;QAI/B;QAEA,IAAI,kBAAkB;YACpB,qBACE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;8BAAgB;;;;;;;;;;;QAGnC;QAEA,IAAI,oBAAoB,MAAM,KAAK,KAAK,oBAAoB;YAC1D,qBACE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;8BAAwB;;;;;;;;;;;QAM3C;QAEA,IAAI,oBAAoB,MAAM,GAAG,GAAG;YAClC,qBACE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAuC;;;;;;kCAKrD,8OAAC;wBAAI,WAAU;kCACZ,oBAAoB,GAAG,CAAC,CAAC,aAAa,sBACrC,8OAAC;gCAEC,WAAU;;kDAEV,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;;kEACC,8OAAC;wDAAK,WAAU;kEACb,YAAY,eAAe;;;;;;oDAE7B,YAAY,SAAS,kBACpB,8OAAC;wDAAE,WAAU;kEACV,YAAY,SAAS;;;;;;oDAGzB,YAAY,SAAS,kBACpB,8OAAC;wDAAE,WAAU;kEACV,YAAY,SAAS;;;;;;;;;;;;0DAI5B,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;oDAAK,WAAU;;wDAAmC;wDACvC,YAAY,YAAY,MAAM;;;;;;;;;;;;;;;;;;kDAI9C,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;0DAAK;;;;;;0DACN,8OAAC;gDAAK,WAAU;;oDAAoB;oDAChC,YAAY,YAAY,KAAK;;;;;;;;;;;;;kDAKnC,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC;4CACC,SAAS,IAAM,wBAAwB;4CACvC,UAAU;4CACV,WAAW,CAAC,0DAA0D,EACpE,mBACI,iDACA,8CACJ;sDAED,iCACC,8OAAC;gDAAK,WAAU;;kEACd,8OAAC;wDACC,WAAU;wDACV,OAAM;wDACN,MAAK;wDACL,SAAQ;;0EAER,8OAAC;gEACC,WAAU;gEACV,IAAG;gEACH,IAAG;gEACH,GAAE;gEACF,QAAO;gEACP,aAAY;;;;;;0EAEd,8OAAC;gEACC,WAAU;gEACV,MAAK;gEACL,GAAE;;;;;;;;;;;;oDAEA;;;;;;uDAIR;;;;;;;;;;;;+BApED;;;;;;;;;;;;;;;;QA6EjB;QAEA,OAAO;IACT;IAEA,wBAAwB;IACxB,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,CAAC,2FAA2F,EACrG,SAAS,kBAAkB,mBAC5B,mEAAmE,CAAC;;0BAErE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC;gCACC,WAAU;gCACV,MAAK;gCACL,QAAO;gCACP,SAAQ;gCACR,OAAM;0CAEN,cAAA,8OAAC;oCACC,eAAc;oCACd,gBAAe;oCACf,aAAY;oCACZ,GAAE;;;;;;;;;;;4BAEA;4BACgB,cAAc;4BAAE;;;;;;;kCAExC,8OAAC;wBACC,SAAS;wBACT,WAAU;kCAEV,cAAA,8OAAC;4BACC,WAAU;4BACV,MAAK;4BACL,QAAO;4BACP,SAAQ;4BACR,OAAM;sCAEN,cAAA,8OAAC;gCACC,eAAc;gCACd,gBAAe;gCACf,aAAY;gCACZ,GAAE;;;;;;;;;;;;;;;;;;;;;;YAOT,CAAC,SAAS,MAAM,MAAM,KAAK,kBAC1B,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,WAAU;wBACV,MAAK;wBACL,QAAO;wBACP,SAAQ;wBACR,OAAM;kCAEN,cAAA,8OAAC;4BACC,eAAc;4BACd,gBAAe;4BACf,aAAY;4BACZ,GAAE;;;;;;;;;;;kCAGN,8OAAC;wBAAE,WAAU;kCAAyC;;;;;;kCAGtD,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;qCAKH;;kCACE,8OAAC;wBAAI,WAAU;kCACZ,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,8OAAC;gCAEC,WAAU;;kDAEV,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC;4CACC,WAAU;4CACV,MAAK;4CACL,QAAO;4CACP,SAAQ;4CACR,OAAM;sDAEN,cAAA,8OAAC;gDACC,eAAc;gDACd,gBAAe;gDACf,aAAY;gDACZ,GAAE;;;;;;;;;;;;;;;;kDAIR,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAG,WAAU;0DACX,KAAK,MAAM;;;;;;0DAGd,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAE,WAAU;kEACV,KAAK,eAAe;;;;;;oDAEtB,KAAK,yBAAyB,kBAC7B,8OAAC;wDAAE,WAAU;kEACV,KAAK,yBAAyB;;;;;;oDAGlC,KAAK,yBAAyB,kBAC7B,8OAAC;wDAAE,WAAU;kEACV,KAAK,yBAAyB;;;;;;;;;;;;0DAKrC,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEACC,SAAS,IACP,eACE,KAAK,EAAE,EACP,KAAK,GAAG,CAAC,GAAG,CAAC,KAAK,QAAQ,IAAI,CAAC,IAAI,IACnC,KAAK,eAAe;gEAGxB,WAAU;0EACX;;;;;;0EAGD,8OAAC;gEAAK,WAAU;0EACb,KAAK,QAAQ,IAAI;;;;;;0EAEpB,8OAAC;gEACC,SAAS,IACP,eACE,KAAK,EAAE,EACP,CAAC,KAAK,QAAQ,IAAI,CAAC,IAAI,GACvB,KAAK,eAAe;gEAGxB,WAAU;0EACX;;;;;;;;;;;;kEAIH,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAI,WAAU;;oEAAoC;oEAC/C,YAAY,KAAK,MAAM,GAAG,CAAC,KAAK,QAAQ,IAAI,CAAC;;;;;;;0EAEjD,8OAAC;gEAAI,WAAU;;oEAAwB;oEACnC,YAAY,KAAK,MAAM;oEAAE;;;;;;;;;;;;;;;;;;;0DAIjC,8OAAC;gDACC,SAAS,IAAM,WAAW,KAAK,EAAE,EAAE,KAAK,eAAe;gDACvD,WAAU;0DACX;;;;;;;;;;;;;+BAlFE,GAAG,KAAK,EAAE,CAAC,CAAC,EAAE,KAAK,eAAe,CAAC,CAAC,EAAE,OAAO;;;;;;;;;;kCA0FxD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,WAAU;kDAAgB;;;;;;kDAChC,8OAAC;wCAAK,WAAU;;4CAAc;4CAAE,YAAY;;;;;;;;;;;;;0CAI9C,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCACC,SAAS;wCACP,sBAAsB,CAAC;wCACvB,IAAI,CAAC,sBAAsB,oBAAoB,MAAM,KAAK,GAAG;4CAC3D;wCACF;oCACF;oCACA,WAAU;8CAET,qBACG,mCACA;;;;;;;;;;;4BAKP,sBAAsB;0CAEvB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,4JAAA,CAAA,UAAI;wCACH,MAAK;wCACL,WAAU;wCACV,SAAS;kDACV;;;;;;kDAGD,8OAAC;wCACC,SAAS;wCACT,WAAU;kDACX;;;;;;;;;;;;;;;;;;;;;;;;;;AASf;uCAEe","debugId":null}},
    {"offset": {"line": 1056, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1062, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Mario%20GGS/fp-ecommerce/src/app/index/categorias.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { supabase } from \"../lib/supabaseClient\";\n\ninterface Categoria {\n  id_categoria: number;\n  nombre_categoria: string;\n}\n\ninterface Producto {\n  id_producto: number;\n  nombre_producto: string;\n  peso_producto: string;\n  id_categoria: number;\n}\n\ninterface CategoriaConProductos {\n  id: number;\n  name: string;\n  items: string[];\n}\n\nconst Categorias = () => {\n  const [openDropdown, setOpenDropdown] = useState<string | null>(null);\n  const [categories, setCategories] = useState<CategoriaConProductos[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [connectionStatus, setConnectionStatus] = useState<string>(\n    \"Comprobando conexión...\"\n  );\n\n  // Test de conexión al montar el componente\n  useEffect(() => {\n    async function testConnection() {\n      try {\n        console.log(\"Probando conexión a Supabase...\");\n\n        // Query simple que debería funcionar independientemente de la estructura de la base de datos\n        const { data, error } = await supabase\n          .from(\"categorias\")\n          .select(\"count\", { count: \"exact\", head: true });\n\n        console.log(\"Respuesta de prueba de conexión:\", { data, error });\n\n        if (error) {\n          console.error(\"Error de conexión:\", error);\n          setConnectionStatus(`❌ Error de conexión: ${error.message}`);\n        } else {\n          console.log(\"Conexión exitosa a Supabase\");\n          setConnectionStatus(\"✅ Conexión exitosa a Supabase\");\n        }\n      } catch (e) {\n        console.error(\"Error inesperado al probar conexión:\", e);\n        setConnectionStatus(\n          `❌ Error inesperado al conectar: ${\n            e instanceof Error ? e.message : String(e)\n          }`\n        );\n      }\n    }\n\n    testConnection();\n  }, []);\n\n  useEffect(() => {\n    const fetchCategoriasYProductos = async () => {\n      try {\n        console.log(\"Obteniendo categorías y productos...\");\n\n        // Primero obtenemos todas las categorías\n        const { data: categorias, error: categoriasError } = await supabase\n          .from(\"categorias\")\n          .select(\"id_categoria, nombre_categoria\");\n\n        console.log(\"Respuesta de categorías:\", categorias);\n\n        if (categoriasError) {\n          console.error(\"Error al obtener categorías:\", categoriasError);\n          setError(categoriasError.message);\n          return;\n        }\n\n        if (!categorias || categorias.length === 0) {\n          console.log(\"No se encontraron categorías\");\n          setLoading(false);\n          return;\n        }\n\n        // Luego obtenemos todos los productos\n        const { data: productos, error: productosError } = await supabase\n          .from(\"productos\")\n          .select(\"id_producto, nombre_producto, id_categoria\");\n\n        console.log(\"Respuesta de productos:\", productos);\n\n        if (productosError) {\n          console.error(\"Error al obtener productos:\", productosError);\n          setError(productosError.message);\n          return;\n        }\n\n        // Agrupamos los productos por categoría\n        const categoriasFormateadas = categorias.map((categoria) => {\n          // Filtramos los productos que pertenecen a esta categoría\n          const productosFiltrados = productos\n            ? productos.filter(\n                (producto) => producto.id_categoria === categoria.id_categoria\n              )\n            : [];\n\n          // Obtenemos solo los nombres de los productos\n          const nombresProductos = productosFiltrados.map(\n            (producto) => producto.nombre_producto\n          );\n\n          return {\n            id: categoria.id_categoria,\n            name: categoria.nombre_categoria,\n            items: nombresProductos,\n          };\n        });\n\n        console.log(\"Categorías con productos:\", categoriasFormateadas);\n        setCategories(categoriasFormateadas);\n      } catch (error) {\n        console.error(\"Error en la operación:\", error);\n        setError(\"Ocurrió un error al cargar los datos\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCategoriasYProductos();\n  }, []);\n\n  const handleDropdownToggle = (category: string) => {\n    if (openDropdown === category) {\n      setOpenDropdown(null);\n    } else {\n      setOpenDropdown(category);\n    }\n  };\n\n  return (\n    <div>\n      {/* Añadir barra de estado de conexión */}\n      <div\n        className={`text-sm mb-2 p-2 text-center ${\n          connectionStatus.includes(\"✅\")\n            ? \"bg-green-100 text-green-800\"\n            : connectionStatus.includes(\"❌\")\n            ? \"bg-red-100 text-red-800\"\n            : \"bg-blue-100 text-blue-800\"\n        }`}\n      >\n        {connectionStatus}\n      </div>\n\n      {loading ? (\n        <div className=\"flex justify-center items-center py-4\">\n          Cargando categorías y productos...\n        </div>\n      ) : error ? (\n        <div className=\"flex justify-center items-center py-4 text-red-600\">\n          Error: {error}\n        </div>\n      ) : categories.length === 0 ? (\n        <div className=\"flex justify-center items-center py-4\">\n          No se encontraron categorías\n        </div>\n      ) : (\n        <div className=\"flex justify-center items-center gap-15 text-lg pt-4 pb-4\">\n          <a\n            href=\"#mejores-ofertas\"\n            className=\"cursor-pointer hover:text-red-600 transition-colors mx-4\"\n          >\n            Ofertas\n          </a>\n          {categories.map((category) => (\n            <div key={category.id} className=\"relative mx-4\">\n              <button\n                onClick={() => handleDropdownToggle(category.name)}\n                className=\"flex items-center hover:text-red-600 transition-colors\"\n              >\n                {category.name}\n                <svg\n                  className={`ml-1 w-4 h-4 transition-transform ${\n                    openDropdown === category.name ? \"rotate-180\" : \"\"\n                  }`}\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth=\"2\"\n                    d=\"M19 9l-7 7-7-7\"\n                  ></path>\n                </svg>\n              </button>\n              {openDropdown === category.name && (\n                <div className=\"absolute z-50 mt-2 w-64 bg-white rounded-md shadow-lg py-1 text-base max-h-96 overflow-y-auto left-0\">\n                  {category.items.length > 0 ? (\n                    category.items.map((item, index) => (\n                      <a\n                        key={index}\n                        href={`/productname?nombre=${encodeURIComponent(item)}`}\n                        className=\"block px-4 py-2 text-gray-800 hover:bg-gray-100\"\n                      >\n                        {item}\n                      </a>\n                    ))\n                  ) : (\n                    <div className=\"block px-4 py-2 text-gray-500 italic\">\n                      No hay productos en esta categoría\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Categorias;\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAuBA,MAAM,aAAa;IACjB,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAChE,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAA2B,EAAE;IACxE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EACrD;IAGF,2CAA2C;IAC3C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,eAAe;YACb,IAAI;gBACF,QAAQ,GAAG,CAAC;gBAEZ,6FAA6F;gBAC7F,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,mIAAA,CAAA,WAAQ,CACnC,IAAI,CAAC,cACL,MAAM,CAAC,SAAS;oBAAE,OAAO;oBAAS,MAAM;gBAAK;gBAEhD,QAAQ,GAAG,CAAC,oCAAoC;oBAAE;oBAAM;gBAAM;gBAE9D,IAAI,OAAO;oBACT,QAAQ,KAAK,CAAC,sBAAsB;oBACpC,oBAAoB,CAAC,qBAAqB,EAAE,MAAM,OAAO,EAAE;gBAC7D,OAAO;oBACL,QAAQ,GAAG,CAAC;oBACZ,oBAAoB;gBACtB;YACF,EAAE,OAAO,GAAG;gBACV,QAAQ,KAAK,CAAC,wCAAwC;gBACtD,oBACE,CAAC,gCAAgC,EAC/B,aAAa,QAAQ,EAAE,OAAO,GAAG,OAAO,IACxC;YAEN;QACF;QAEA;IACF,GAAG,EAAE;IAEL,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,4BAA4B;YAChC,IAAI;gBACF,QAAQ,GAAG,CAAC;gBAEZ,yCAAyC;gBACzC,MAAM,EAAE,MAAM,UAAU,EAAE,OAAO,eAAe,EAAE,GAAG,MAAM,mIAAA,CAAA,WAAQ,CAChE,IAAI,CAAC,cACL,MAAM,CAAC;gBAEV,QAAQ,GAAG,CAAC,4BAA4B;gBAExC,IAAI,iBAAiB;oBACnB,QAAQ,KAAK,CAAC,gCAAgC;oBAC9C,SAAS,gBAAgB,OAAO;oBAChC;gBACF;gBAEA,IAAI,CAAC,cAAc,WAAW,MAAM,KAAK,GAAG;oBAC1C,QAAQ,GAAG,CAAC;oBACZ,WAAW;oBACX;gBACF;gBAEA,sCAAsC;gBACtC,MAAM,EAAE,MAAM,SAAS,EAAE,OAAO,cAAc,EAAE,GAAG,MAAM,mIAAA,CAAA,WAAQ,CAC9D,IAAI,CAAC,aACL,MAAM,CAAC;gBAEV,QAAQ,GAAG,CAAC,2BAA2B;gBAEvC,IAAI,gBAAgB;oBAClB,QAAQ,KAAK,CAAC,+BAA+B;oBAC7C,SAAS,eAAe,OAAO;oBAC/B;gBACF;gBAEA,wCAAwC;gBACxC,MAAM,wBAAwB,WAAW,GAAG,CAAC,CAAC;oBAC5C,0DAA0D;oBAC1D,MAAM,qBAAqB,YACvB,UAAU,MAAM,CACd,CAAC,WAAa,SAAS,YAAY,KAAK,UAAU,YAAY,IAEhE,EAAE;oBAEN,8CAA8C;oBAC9C,MAAM,mBAAmB,mBAAmB,GAAG,CAC7C,CAAC,WAAa,SAAS,eAAe;oBAGxC,OAAO;wBACL,IAAI,UAAU,YAAY;wBAC1B,MAAM,UAAU,gBAAgB;wBAChC,OAAO;oBACT;gBACF;gBAEA,QAAQ,GAAG,CAAC,6BAA6B;gBACzC,cAAc;YAChB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,0BAA0B;gBACxC,SAAS;YACX,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,uBAAuB,CAAC;QAC5B,IAAI,iBAAiB,UAAU;YAC7B,gBAAgB;QAClB,OAAO;YACL,gBAAgB;QAClB;IACF;IAEA,qBACE,8OAAC;;0BAEC,8OAAC;gBACC,WAAW,CAAC,6BAA6B,EACvC,iBAAiB,QAAQ,CAAC,OACtB,gCACA,iBAAiB,QAAQ,CAAC,OAC1B,4BACA,6BACJ;0BAED;;;;;;YAGF,wBACC,8OAAC;gBAAI,WAAU;0BAAwC;;;;;uBAGrD,sBACF,8OAAC;gBAAI,WAAU;;oBAAqD;oBAC1D;;;;;;uBAER,WAAW,MAAM,KAAK,kBACxB,8OAAC;gBAAI,WAAU;0BAAwC;;;;;qCAIvD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;oBAGA,WAAW,GAAG,CAAC,CAAC,yBACf,8OAAC;4BAAsB,WAAU;;8CAC/B,8OAAC;oCACC,SAAS,IAAM,qBAAqB,SAAS,IAAI;oCACjD,WAAU;;wCAET,SAAS,IAAI;sDACd,8OAAC;4CACC,WAAW,CAAC,kCAAkC,EAC5C,iBAAiB,SAAS,IAAI,GAAG,eAAe,IAChD;4CACF,MAAK;4CACL,QAAO;4CACP,SAAQ;4CACR,OAAM;sDAEN,cAAA,8OAAC;gDACC,eAAc;gDACd,gBAAe;gDACf,aAAY;gDACZ,GAAE;;;;;;;;;;;;;;;;;gCAIP,iBAAiB,SAAS,IAAI,kBAC7B,8OAAC;oCAAI,WAAU;8CACZ,SAAS,KAAK,CAAC,MAAM,GAAG,IACvB,SAAS,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,sBACxB,8OAAC;4CAEC,MAAM,CAAC,oBAAoB,EAAE,mBAAmB,OAAO;4CACvD,WAAU;sDAET;2CAJI;;;;kEAQT,8OAAC;wCAAI,WAAU;kDAAuC;;;;;;;;;;;;2BApCpD,SAAS,EAAE;;;;;;;;;;;;;;;;;AAgDjC;uCAEe","debugId":null}},
    {"offset": {"line": 1285, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1291, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Mario%20GGS/fp-ecommerce/src/app/index/footer.tsx"],"sourcesContent":["\"use client\";\n\nconst Footer = () => {\n  return (\n    <footer className=\"bg-[#eb1414] rounded-lg shadow-sm mt-8\">\n      <div className=\"w-full max-w-screen-xl mx-auto p-4 md:py-8\">\n        <div className=\"sm:flex sm:items-center sm:justify-between\">\n          <a\n            href=\"/\"\n            className=\"flex items-center mb-4 sm:mb-0 space-x-3 rtl:space-x-reverse\"\n          >\n            <img src=\"\\oxc.svg\" className=\"h-8\" alt=\"Mario Gomez Logo\" />\n            <span className=\"self-center text-2xl font-bold whitespace-nowrap text-white\">\n              Feria de Proyectos\n            </span>\n          </a>\n          <ul className=\"flex flex-wrap items-center mb-6 text-sm font-medium text-white sm:mb-0\">\n            <li>\n              <a href=\"#\" className=\"hover:underline me-4 md:me-6\">\n                About\n              </a>\n            </li>\n            <li>\n              <a href=\"#\" className=\"hover:underline me-4 md:me-6\">\n                Privacy Policy\n              </a>\n            </li>\n            <li>\n              <a href=\"#\" className=\"hover:underline me-4 md:me-6\">\n                Licensing\n              </a>\n            </li>\n            <li>\n              <a href=\"#\" className=\"hover:underline\">\n                Contact\n              </a>\n            </li>\n          </ul>\n        </div>\n        <hr className=\"my-6 border-gray-200 sm:mx-auto lg:my-8\" />\n        <span className=\"block text-sm text-white sm:text-center\">\n          © 2025{\" \"}\n          <a href=\"https://flowbite.com/\" className=\"hover:underline\">\n            Mario Gabriel Gómez Seguame\n          </a>\n          . All Rights Reserved.\n        </span>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,SAAS;IACb,qBACE,8OAAC;QAAO,WAAU;kBAChB,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,MAAK;4BACL,WAAU;;8CAEV,8OAAC;oCAAI,KAAI;oCAAW,WAAU;oCAAM,KAAI;;;;;;8CACxC,8OAAC;oCAAK,WAAU;8CAA8D;;;;;;;;;;;;sCAIhF,8OAAC;4BAAG,WAAU;;8CACZ,8OAAC;8CACC,cAAA,8OAAC;wCAAE,MAAK;wCAAI,WAAU;kDAA+B;;;;;;;;;;;8CAIvD,8OAAC;8CACC,cAAA,8OAAC;wCAAE,MAAK;wCAAI,WAAU;kDAA+B;;;;;;;;;;;8CAIvD,8OAAC;8CACC,cAAA,8OAAC;wCAAE,MAAK;wCAAI,WAAU;kDAA+B;;;;;;;;;;;8CAIvD,8OAAC;8CACC,cAAA,8OAAC;wCAAE,MAAK;wCAAI,WAAU;kDAAkB;;;;;;;;;;;;;;;;;;;;;;;8BAM9C,8OAAC;oBAAG,WAAU;;;;;;8BACd,8OAAC;oBAAK,WAAU;;wBAA0C;wBACjD;sCACP,8OAAC;4BAAE,MAAK;4BAAwB,WAAU;sCAAkB;;;;;;wBAExD;;;;;;;;;;;;;;;;;;AAMd;uCAEe","debugId":null}},
    {"offset": {"line": 1449, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1455, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Mario%20GGS/fp-ecommerce/src/app/index/header.tsx"],"sourcesContent":["\"use client\";\n\nimport Image from \"next/image\";\nimport Link from \"next/link\";\n\nconst Header = () => {\n  return (\n    <div className=\"container mx-auto p-2 md:p-4\">\n      <div className=\"flex flex-col sm:flex-row items-center justify-between\">\n        {/* Logo */}\n        <div className=\"mb-3 sm:mb-0\">\n          <Image\n            src=\"/oxc.svg\"\n            alt=\"Logo Precio Justo\"\n            width={24}\n            height={24}\n            className=\"w-5 h-5 sm:w-6 sm:h-6\"\n            priority\n          />\n        </div>\n\n        {/* Eslogan */}\n        <div className=\"mb-3 sm:mb-0 text-center sm:text-left\">\n          <h2 className=\"text-white text-sm sm:text-base font-medium\">\n            Encuentra los mejores precios en tu ciudad\n          </h2>\n        </div>\n\n        {/* Redes sociales */}\n        <div className=\"flex space-x-4\">\n          <Link\n            href=\"https://facebook.com\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-white hover:text-gray-200 transition-colors\"\n          >\n            <Image\n              src=\"/facebook.svg\"\n              alt=\"Facebook\"\n              width={24}\n              height={24}\n              className=\"w-5 h-5 sm:w-6 sm:h-6\"\n            />\n          </Link>\n          <Link\n            href=\"https://x.com\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-white hover:text-gray-200 transition-colors\"\n          >\n            <Image\n              src=\"/x_twitter.svg\"\n              alt=\"X\"\n              width={24}\n              height={24}\n              className=\"w-5 h-5 sm:w-6 sm:h-6\"\n            />\n          </Link>\n          <Link\n            href=\"https://instagram.com\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-white hover:text-gray-200 transition-colors\"\n          >\n            <Image\n              src=\"/instagram.svg\"\n              alt=\"Instagram\"\n              width={24}\n              height={24}\n              className=\"w-5 h-5 sm:w-6 sm:h-6\"\n            />\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Header;\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,SAAS;IACb,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,6HAAA,CAAA,UAAK;wBACJ,KAAI;wBACJ,KAAI;wBACJ,OAAO;wBACP,QAAQ;wBACR,WAAU;wBACV,QAAQ;;;;;;;;;;;8BAKZ,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAG,WAAU;kCAA8C;;;;;;;;;;;8BAM9D,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,4JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,QAAO;4BACP,KAAI;4BACJ,WAAU;sCAEV,cAAA,8OAAC,6HAAA,CAAA,UAAK;gCACJ,KAAI;gCACJ,KAAI;gCACJ,OAAO;gCACP,QAAQ;gCACR,WAAU;;;;;;;;;;;sCAGd,8OAAC,4JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,QAAO;4BACP,KAAI;4BACJ,WAAU;sCAEV,cAAA,8OAAC,6HAAA,CAAA,UAAK;gCACJ,KAAI;gCACJ,KAAI;gCACJ,OAAO;gCACP,QAAQ;gCACR,WAAU;;;;;;;;;;;sCAGd,8OAAC,4JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,QAAO;4BACP,KAAI;4BACJ,WAAU;sCAEV,cAAA,8OAAC,6HAAA,CAAA,UAAK;gCACJ,KAAI;gCACJ,KAAI;gCACJ,OAAO;gCACP,QAAQ;gCACR,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOxB;uCAEe","debugId":null}},
    {"offset": {"line": 1590, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1596, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Mario%20GGS/fp-ecommerce/src/app/components/searchbar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { FormEvent, useEffect, useRef, useState } from \"react\";\nimport { supabase } from \"../lib/supabaseClient\";\n\ninterface SearchResult {\n  id_producto: number;\n  nombre_producto: string;\n}\n\nconst SearchBar = () => {\n  const [query, setQuery] = useState(\"\");\n  const [results, setResults] = useState<SearchResult[]>([]);\n  const [showResults, setShowResults] = useState(false);\n  const [isSearching, setIsSearching] = useState(false);\n  const searchContainerRef = useRef<HTMLDivElement>(null);\n  const router = useRouter();\n\n  // Realizar búsqueda en tiempo real mientras se escribe\n  useEffect(() => {\n    const searchProducts = async () => {\n      if (query.trim().length < 2) {\n        setResults([]);\n        return;\n      }\n\n      setIsSearching(true);\n      try {\n        const { data, error } = await supabase\n          .from(\"productos\")\n          .select(\"id_producto, nombre_producto\")\n          .ilike(\"nombre_producto\", `%${query}%`)\n          .order(\"nombre_producto\")\n          .limit(5);\n\n        if (error) {\n          console.error(\"Error al buscar productos:\", error);\n          return;\n        }\n\n        setResults(data || []);\n        setShowResults(true);\n      } catch (err) {\n        console.error(\"Error inesperado en la búsqueda:\", err);\n      } finally {\n        setIsSearching(false);\n      }\n    };\n\n    // Usar un temporizador para evitar hacer muchas solicitudes mientras se escribe\n    const timer = setTimeout(() => {\n      if (query.trim()) {\n        searchProducts();\n      }\n    }, 300);\n\n    return () => clearTimeout(timer);\n  }, [query]);\n\n  // Cerrar resultados al hacer clic fuera de la barra de búsqueda\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (\n        searchContainerRef.current &&\n        !searchContainerRef.current.contains(event.target as Node)\n      ) {\n        setShowResults(false);\n      }\n    }\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n\n  // Manejar el envío del formulario\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    if (query.trim()) {\n      router.push(`/search?q=${encodeURIComponent(query)}`);\n      setShowResults(false);\n    }\n  };\n\n  // Manejar clic en un resultado\n  const handleResultClick = (productName: string) => {\n    router.push(`/productname?nombre=${encodeURIComponent(productName)}`);\n    setShowResults(false);\n    setQuery(\"\");\n  };\n\n  return (\n    <div className=\"w-full max-w-3xl mx-auto relative\" ref={searchContainerRef}>\n      <form onSubmit={handleSubmit}>\n        <label\n          htmlFor=\"default-search\"\n          className=\"mb-2 text-sm font-medium text-white sr-only dark:text-white\"\n        >\n          Search\n        </label>\n        <div className=\"relative\">\n          <div\n            className=\"absolute inset-y-0 start-0 flex\n            items-center ps-3 pointer-events-none\"\n          >\n            <svg\n              className=\"w-4 h-4 text-white dark:text-white\"\n              aria-hidden=\"true\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 20 20\"\n            >\n              <path\n                stroke=\"currentColor\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z\"\n              />\n            </svg>\n          </div>\n          <input\n            type=\"search\"\n            id=\"default-search\"\n            className=\"block w-full p-4 ps-10 text-base text-white border-1\n            border-white rounded-lg dark:bg-transparent dark:text-white\n            focus:outline-none focus:border-2 no-clear-button\"\n            placeholder=\"Buscar productos...\"\n            value={query}\n            onChange={(e) => setQuery(e.target.value)}\n            onFocus={() => query.trim().length >= 2 && setShowResults(true)}\n            required\n          />\n          <button\n            type=\"submit\"\n            className=\"text-white absolute end-2.5 bottom-2.5\n            focus:outline-none font-medium rounded-lg text-sm px-4 py-2 hover:text-red-500\"\n          >\n            Buscar\n          </button>\n        </div>\n      </form>\n\n      {/* Resultados de búsqueda en tiempo real */}\n      {showResults && (\n        <div className=\"absolute mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg z-30 max-h-72 overflow-y-auto\">\n          {isSearching ? (\n            <div className=\"p-4 text-center text-gray-500\">Buscando...</div>\n          ) : results.length > 0 ? (\n            <ul>\n              {results.map((result) => (\n                <li\n                  key={result.id_producto}\n                  className=\"px-4 py-3 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-0 text-gray-800\"\n                  onClick={() => handleResultClick(result.nombre_producto)}\n                >\n                  {result.nombre_producto}\n                </li>\n              ))}\n              <li className=\"p-2 text-center bg-gray-50\">\n                <button\n                  onClick={handleSubmit}\n                  className=\"text-red-600 hover:text-red-800 text-sm font-medium\"\n                >\n                  Ver todos los resultados\n                </button>\n              </li>\n            </ul>\n          ) : query.trim().length >= 2 ? (\n            <div className=\"p-4 text-center text-gray-500\">\n              No se encontraron productos\n            </div>\n          ) : null}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SearchBar;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1816, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1822, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Mario%20GGS/fp-ecommerce/src/app/index/navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { useEffect, useState } from \"react\";\nimport SearchBar from \"../components/searchbar\";\nimport { useCart } from \"../index/carrito\";\n\nconst Navbar = () => {\n  const { toggleCart, totalItems } = useCart();\n  const [isMounted, setIsMounted] = useState(false);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n  // Marcar cuando el componente está montado\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  // Función para abrir/cerrar el menú\n  const toggleMenu = () => {\n    setIsMenuOpen(!isMenuOpen);\n  };\n\n  return (\n    <header className=\"bg-red-600 p-3 sm:p-4 md:p-6 sticky top-0 z-20 shadow-md\">\n      <div className=\"container mx-auto flex flex-col sm:flex-row items-center justify-between\">\n        {/* Fila superior en móvil / Izquierda en escritorio */}\n        <div className=\"flex items-center mb-3 sm:mb-0 w-full sm:w-auto justify-between sm:justify-start\">\n          {/* Botón de menú hamburguesa (solo visible en móvil y tablets pequeñas) */}\n          <button\n            className=\"sm:hidden focus:outline-none mr-2\"\n            onClick={toggleMenu}\n            aria-label=\"Abrir menú\"\n          >\n            <Image\n              src=\"/menu-burger.svg\"\n              alt=\"Menú\"\n              width={24}\n              height={24}\n              className=\"text-white\"\n            />\n          </button>\n\n          {/* Logo - adaptable según el tamaño */}\n          <Link\n            href=\"/\"\n            className=\"text-white text-lg sm:text-xl md:text-2xl font-bold transition-all\"\n          >\n            Precio Justo\n          </Link>\n\n          {/* Botón del carrito para móvil */}\n          <button\n            onClick={toggleCart}\n            className=\"sm:hidden text-white hover:text-gray-200 transition-colors relative\"\n            aria-label=\"Ver lista de compras\"\n          >\n            <div className=\"relative w-6 h-6 sm:w-7 sm:h-7\">\n              <Image\n                src=\"/list.svg\"\n                alt=\"Lista de compras\"\n                width={24}\n                height={24}\n                className=\"text-white\"\n              />\n              {isMounted && totalItems > 0 && (\n                <span className=\"absolute -top-2 -right-2 bg-white text-red-600 rounded-full w-4 h-4 sm:w-5 sm:h-5 flex items-center justify-center text-xs font-bold\">\n                  {totalItems}\n                </span>\n              )}\n            </div>\n          </button>\n        </div>\n\n        {/* Barra de búsqueda - adaptable */}\n        <div className=\"w-full sm:w-1/2 lg:w-2/5 mb-3 sm:mb-0 sm:mx-4 md:mx-auto order-3 sm:order-2\">\n          <SearchBar />\n        </div>\n\n        {/* Botón del carrito para tablet/desktop */}\n        <div className=\"hidden sm:flex items-center justify-end sm:w-auto order-2 sm:order-3\">\n          <button\n            onClick={toggleCart}\n            className=\"text-white hover:text-gray-200 transition-colors relative p-1\"\n            aria-label=\"Ver lista de compras\"\n          >\n            <div className=\"relative w-6 h-6 md:w-7 md:h-7\">\n              <Image\n                src=\"/list.svg\"\n                alt=\"Lista de compras\"\n                width={24}\n                height={24}\n                className=\"text-white\"\n              />\n              {isMounted && totalItems > 0 && (\n                <span className=\"absolute -top-2 -right-2 bg-white text-red-600 rounded-full w-4 h-4 md:w-5 md:h-5 flex items-center justify-center text-xs font-bold\">\n                  {totalItems}\n                </span>\n              )}\n            </div>\n          </button>\n        </div>\n      </div>\n\n      {/* Menú móvil - placeholder */}\n      {isMounted && isMenuOpen && (\n        <div className=\"sm:hidden mt-2 pt-2 border-t border-red-500\">\n          <div className=\"py-2 text-white text-center\">\n            Menú en construcción\n          </div>\n        </div>\n      )}\n    </header>\n  );\n};\n\nexport default Navbar;\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQA,MAAM,SAAS;IACb,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,2CAA2C;IAC3C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,aAAa;IACf,GAAG,EAAE;IAEL,oCAAoC;IACpC,MAAM,aAAa;QACjB,cAAc,CAAC;IACjB;IAEA,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC;gCACC,WAAU;gCACV,SAAS;gCACT,cAAW;0CAEX,cAAA,8OAAC,6HAAA,CAAA,UAAK;oCACJ,KAAI;oCACJ,KAAI;oCACJ,OAAO;oCACP,QAAQ;oCACR,WAAU;;;;;;;;;;;0CAKd,8OAAC,4JAAA,CAAA,UAAI;gCACH,MAAK;gCACL,WAAU;0CACX;;;;;;0CAKD,8OAAC;gCACC,SAAS;gCACT,WAAU;gCACV,cAAW;0CAEX,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,6HAAA,CAAA,UAAK;4CACJ,KAAI;4CACJ,KAAI;4CACJ,OAAO;4CACP,QAAQ;4CACR,WAAU;;;;;;wCAEX,aAAa,aAAa,mBACzB,8OAAC;4CAAK,WAAU;sDACb;;;;;;;;;;;;;;;;;;;;;;;kCAQX,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,sIAAA,CAAA,UAAS;;;;;;;;;;kCAIZ,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,SAAS;4BACT,WAAU;4BACV,cAAW;sCAEX,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,6HAAA,CAAA,UAAK;wCACJ,KAAI;wCACJ,KAAI;wCACJ,OAAO;wCACP,QAAQ;wCACR,WAAU;;;;;;oCAEX,aAAa,aAAa,mBACzB,8OAAC;wCAAK,WAAU;kDACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;YASZ,aAAa,4BACZ,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BAA8B;;;;;;;;;;;;;;;;;AAOvD;uCAEe","debugId":null}},
    {"offset": {"line": 2016, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}